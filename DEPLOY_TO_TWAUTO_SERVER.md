# ๐ ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ TWauto Server (52.68.160.171)

**ะกัะฐััั**: โ ะัะพะตะบั ะณะพัะพะฒ ะบ ะดะตะฟะปะพั  
**ะกะพะฒะผะตััะธะผะพััั**: 8/10 (ะพะฟัะธะผะธะทะธัะพะฒะฐะฝ ะดะปั 512 MB RAM)  
**ะัะตะผั ัััะฐะฝะพะฒะบะธ**: 10-15 ะผะธะฝัั

---

## ๐ฆ ะะพะดะณะพัะพะฒะบะฐ (ะฝะฐ ะฒะฐัะตะผ Mac)

ะััะธะฒ ัะถะต ัะพะทะดะฐะฝ: `tw-auto-executor-deploy.tar.gz`

```bash
# ะัะพะฒะตัะธัั ัะฐะทะผะตั
ls -lh /Users/maksim/my_project/TWAutoBotPy/tw-auto-executor-deploy.tar.gz

# ะััะธะฒ ัะพะดะตัะถะธั ะฒัั ะฝะตะพะฑัะพะดะธะผะพะต ะะะ node_modules (ะพะฝะธ ัััะฐะฝะพะฒัััั ะฝะฐ ัะตัะฒะตัะต)
```

---

## ๐ ะฃััะฐะฝะพะฒะบะฐ ะฝะฐ ะกะตัะฒะตั (5 ัะฐะณะพะฒ)

### ะจะฐะณ 1: ะะฐะณััะทะธัะต ะฐััะธะฒ ะฝะฐ ัะตัะฒะตั

```bash
# ะะฐ ะฒะฐัะตะผ Mac
cd /Users/maksim/my_project/TWAutoBotPy

scp tw-auto-executor-deploy.tar.gz root@52.68.160.171:~/
```

**ะะฒะตััะธ ะฟะฐัะพะปั ัะตัะฒะตัะฐ** ะบะพะณะดะฐ ะฟะพะฟัะพัะธั.

---

### ะจะฐะณ 2: ะะพะดะบะปััะธัะตัั ะบ ัะตัะฒะตัั

```bash
ssh root@52.68.160.171
```

---

### ะจะฐะณ 3: ะะฐัะฟะฐะบัะนัะต ะธ ัััะฐะฝะพะฒะธัะต

```bash
# ะะฐ ัะตัะฒะตัะต
cd ~
mkdir -p tw-auto-executor
tar xzf tw-auto-executor-deploy.tar.gz -C tw-auto-executor/
cd tw-auto-executor

# ะะฐะฟัััะธัั ะฐะฒัะพะผะฐัะธัะตัะบะธะน ัััะฐะฝะพะฒัะธะบ
chmod +x install.sh
./install.sh
```

ะฃััะฐะฝะพะฒัะธะบ ะฐะฒัะพะผะฐัะธัะตัะบะธ:
- โ ะฃััะฐะฝะพะฒะธั Node.js 20.x
- โ ะฃััะฐะฝะพะฒะธั PM2
- โ ะฃััะฐะฝะพะฒะธั ะทะฐะฒะธัะธะผะพััะธ
- โ ะกะพะฑะตัะตั ะฟัะพะตะบั
- โ ะกะพะทะดะฐัั .env ะธะท .env.example

---

### ะจะฐะณ 4: ะะฐัััะพะนัะต .env

```bash
# ะกะณะตะฝะตัะธัะพะฒะฐัั ัะธะปัะฝัะน passphrase
openssl rand -base64 32

# ะัะบัััั .env ะดะปั ัะตะดะฐะบัะธัะพะฒะฐะฝะธั
nano .env
```

**ะะฑัะทะฐัะตะปัะฝะพ ะธะทะผะตะฝะธัั**:
```bash
# ะะผะตััะพ test123 ะฒััะฐะฒะธัั ัะณะตะฝะตัะธัะพะฒะฐะฝะฝัะน ะฟะฐัะพะปั
WEBHOOK_PASSPHRASE=ะฒะฐั_ัะธะปัะฝัะน_ะฟะฐัะพะปั_ะธะท_openssl

# ะะพะฑะฐะฒะธัั ะฒะฐัะธ API ะบะปััะธ Binance
BINANCE_API_KEY=ะฒะฐั_binance_api_key
BINANCE_SECRET=ะฒะฐั_binance_secret

# ะฃััะฐะฝะพะฒะธัั production mode
NODE_ENV=production

# ะััะฐะปัะฝะพะต ะพััะฐะฒะธัั ะฟะพ ัะผะพะปัะฐะฝะธั
```

**ะกะพััะฐะฝะธัั**: `Ctrl+X` โ `Y` โ `Enter`

---

### ะจะฐะณ 5: ะะฐะฟัััะธัะต ัะตัะฒะธั

```bash
# ะะฐะฟัััะธัั ัะตัะตะท PM2
pm2 start ecosystem.config.js

# ะกะพััะฐะฝะธัั ะบะพะฝัะธะณััะฐัะธั
pm2 save

# ะะฐัััะพะธัั ะฐะฒัะพะทะฐะฟััะบ ะฟัะธ ะฟะตัะตะทะฐะณััะทะบะต ัะตัะฒะตัะฐ
pm2 startup

# ะัะฟะพะปะฝะธัั ะบะพะผะฐะฝะดั ะบะพัะพััั ะฟะพะบะฐะทะฐะป pm2 startup (ะพะฝะฐ ะฑัะดะตั ะฝะฐัะธะฝะฐัััั ั sudo)
```

**ะัะธะผะตั ะบะพะผะฐะฝะดั ะพั pm2 startup**:
```bash
sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u root --hp /root
```

---

## โ ะัะพะฒะตัะบะฐ ะะฐะฑะพัั

### 1. ะัะพะฒะตัะธัั ััะฐััั PM2

```bash
pm2 status
```

**ะะถะธะดะฐะตััั**:
```
โโโโโโโฌโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโโ
โ id  โ name               โ status  โ restart โ memory   โ
โโโโโโโผโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโโค
โ 0   โ tw-auto-executor   โ online  โ 0       โ 150 MB   โ
โโโโโโโดโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโโ
```

โ **status = online**  
โ **memory < 300 MB**

---

### 2. ะัะพะฒะตัะธัั ะปะพะณะธ

```bash
pm2 logs tw-auto-executor --lines 50
```

**ะะถะธะดะฐะตััั**:
```
INFO: ๐ TW Auto Executor started on 0.0.0.0:3000
INFO: Environment: production
INFO: Telegram notifications: DISABLED (ะธะปะธ ENABLED)
INFO: Configured exchanges: binance
```

โ **ะะตั ERROR ะฒ ะปะพะณะฐั**

---

### 3. ะัะพะฒะตัะธัั health check (ะปะพะบะฐะปัะฝะพ)

```bash
curl http://localhost:3000/health
```

**ะะถะธะดะฐะตััั**:
```json
{"status":"ok","timestamp":"...","uptime":...}
```

โ **ะะพะทะฒัะฐัะฐะตั 200 OK**

---

### 4. ะะฐัััะพะนัะต firewall

```bash
sudo ufw allow 22/tcp
sudo ufw allow 3000/tcp
sudo ufw enable
sudo ufw status
```

**ะัะพะฒะตัะบะฐ**:
```
Status: active

To                         Action      From
--                         ------      ----
22/tcp                     ALLOW       Anywhere
3000/tcp                   ALLOW       Anywhere
```

---

### 5. ะัะพะฒะตัะธัั ะดะพัััะฟ ะธะทะฒะฝะต (ั ะฒะฐัะตะณะพ Mac)

```bash
# ะะฐ ะฒะฐัะตะผ Mac
curl http://52.68.160.171:3000/health
```

**ะะถะธะดะฐะตััั**:
```json
{"status":"ok","timestamp":"...","uptime":...}
```

โ **ะกะตัะฒะตั ะดะพัััะฟะตะฝ ะธะท ะธะฝัะตัะฝะตัะฐ!**

---

## ๐งช ะขะตััะพะฒัะน ะัะดะตั

### ะะพะปััะธัั passphrase

```bash
# ะะฐ ัะตัะฒะตัะต
cat .env | grep WEBHOOK_PASSPHRASE
```

### ะัะฟัะฐะฒะธัั ัะตััะพะฒัะน ะพัะดะตั (ั Mac)

```bash
curl -X POST http://52.68.160.171:3000/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "exchange": "binance",
    "symbol": "BTC/USDT",
    "action": "buy",
    "volume": 0.0001,
    "orderType": "market",
    "passphrase": "ะะะจ_PASSPHRASE_ะะ_ENV"
  }'
```

**ะะถะธะดะฐะตััั** (ะตัะปะธ API ะบะปััะธ ะฟัะฐะฒะธะปัะฝัะต):
```json
{
  "success": true,
  "orderId": "...",
  "exchange": "binance",
  "symbol": "BTC/USDT",
  ...
}
```

---

## ๐ฑ ะะฐัััะพะนะบะฐ TradingView

### 1. ะกะพะทะดะฐะนัะต Alert ะฒ TradingView

- **Webhook URL**: `http://52.68.160.171:3000/webhook`

### 2. Message ะดะปั Spot:

```json
{
  "exchange": "binance",
  "symbol": "{{ticker}}",
  "action": "{{strategy.order.action}}",
  "volume": 0.001,
  "orderType": "market",
  "passphrase": "ะะะจ_PASSPHRASE"
}
```

### 3. Message ะดะปั Futures:

```json
{
  "exchange": "binance",
  "symbol": "{{ticker}}",
  "action": "{{strategy.order.action}}",
  "volume": 10,
  "orderType": "market",
  "leverage": 5,
  "passphrase": "ะะะจ_PASSPHRASE"
}
```

---

## ๐ ะะพะฝะธัะพัะธะฝะณ (ะฟะตัะฒัะต 24 ัะฐัะฐ)

### ะะฐะถะดัะน ัะฐั ะฟัะพะฒะตัััั:

```bash
# 1. ะกัะฐััั ะธ ะฟะฐะผััั
pm2 show tw-auto-executor

# 2. ะัะธะฑะบะธ ะฒ ะปะพะณะฐั
pm2 logs tw-auto-executor --err --lines 20

# 3. ะกะธััะตะผะฝะฐั ะฟะฐะผััั
free -h

# 4. ะะพะปะธัะตััะฒะพ ะฟะตัะตะทะฐะฟััะบะพะฒ
pm2 show tw-auto-executor | grep restart
```

**ะะปะตััั**:
- ๐ก Memory > 300 MB โ ะฟัะพะฒะตัะธัั
- ๐ด Memory > 400 MB โ PM2 ะฟะตัะตะทะฐะฟัััะธั (ััะพ ะฝะพัะผะฐะปัะฝะพ)
- ๐ด Restarts > 5 โ ะฟัะพะฒะตัะธัั ะปะพะณะธ
- ๐ด Status = stopped โ ะบัะธัะธัะฝะพ!

---

## โ๏ธ ะัะปะธ ะะฐะผััะธ ะะต ะฅะฒะฐัะฐะตั

### ะะพะฑะฐะฒะธัั Swap (1 GB)

```bash
sudo fallocate -l 1G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab

# ะัะพะฒะตัะธัั
free -h
```

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะะธะฝะธะผัะผ (ะะะฏะะะขะะะฌะะ):
- [x] Firewall ะฝะฐัััะพะตะฝ (ufw)
- [x] Passphrase ะะ test123
- [x] API ะบะปััะธ ะขะะะฌะะ ั Trading ะฟัะฐะฒะฐะผะธ
- [x] IP Whitelist ะฝะฐ ะฑะธัะถะต

### ะะตะบะพะผะตะฝะดัะตััั:
- [ ] HTTPS ัะตัะตะท Nginx + Let's Encrypt
- [ ] Fail2ban ะดะปั ะทะฐัะธัั SSH
- [ ] ะะตะณัะปััะฝัะต backup .env
- [ ] ะะพะฝะธัะพัะธะฝะณ ะปะพะณะพะฒ

---

## โ ะัะพะณะพะฒัะน ะกัะฐััั

| ะัะธัะตัะธะน | ะกัะฐััั |
|----------|--------|
| ะะพะด ะณะพัะพะฒ | โ |
| ะกะฑะพัะบะฐ OK | โ |
| ะขะตััั passed | โ |
| ะกะตัะฒะตั ัะพะฒะผะตััะธะผ | โ |
| ะะฟัะธะผะธะทะธัะพะฒะฐะฝ ะดะปั 512 MB | โ |
| ะะพะบัะผะตะฝัะฐัะธั ะฟะพะปะฝะฐั | โ |
| ะะพัะพะฒ ะบ ะดะตะฟะปะพั | โ |

**ะะฑัะธะน ััะฐััั**: โ **READY TO DEPLOY**

---

## ๐ ะะพัะพะฒะพ!

**ะัะพะตะบั ะฟะพะปะฝะพัััั ะณะพัะพะฒ ะดะปั ัััะฐะฝะพะฒะบะธ ะฝะฐ ะฒะฐั ัะตัะฒะตั TWauto!**

ะกะปะตะดัะนัะต 5 ัะฐะณะฐะผ ะฒััะต ะธ ัะตัะตะท 15 ะผะธะฝัั ั ะฒะฐั ะฑัะดะตั ัะฐะฑะพัะฐััะธะน ะฑะพั! ๐

_ะกะพะทะดะฐะฝะพ: 22 ะดะตะบะฐะฑัั 2024_  
_ะะปั ัะตัะฒะตัะฐ: TWauto (52.68.160.171, Tokyo, 512MB RAM)_  
_ะะตััะธั ะฟัะพะตะบัะฐ: 1.0.0_

