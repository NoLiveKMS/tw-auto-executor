# üéâ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è volumeUSDT - –ò—Ç–æ–≥–æ–≤–∞—è –°–≤–æ–¥–∫–∞

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–î–∞—Ç–∞**: 22 –¥–µ–∫–∞–±—Ä—è 2024  
**–í–µ—Ä—Å–∏—è**: 1.1.0

---

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **–§–∞–π–ª**: `src/types/trade-signal.types.ts`
- –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `volumeUSDT?: number`
- `volume` —Ç–µ–ø–µ—Ä—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
- –°–æ–∑–¥–∞–Ω –≤–∞–ª–∏–¥–∞—Ç–æ—Ä `TradeSignalWithVolumeCodec`
- –û–±–Ω–æ–≤–ª–µ–Ω —Ç–∏–ø `OrderResult.volume` –Ω–∞ `number`

### 2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–º–µ–Ω–∞
- **–§–∞–π–ª**: `src/domain/validation.service.ts`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `TradeSignalWithVolumeCodec`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –æ–±—ä–µ–º–∞

### 3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ JSON Schema –¥–ª—è Fastify
- **–§–∞–π–ª**: `src/handler/webhook.handler.ts`
- –î–æ–±–∞–≤–ª–µ–Ω `volumeUSDT` –≤ —Å—Ö–µ–º—É
- `volume` —É–¥–∞–ª–µ–Ω –∏–∑ `required`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è `oneOf` –¥–ª—è volume/volumeUSDT

### 4. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ä–∞—Å—á–µ—Ç –æ–±—ä–µ–º–∞
- **–§–∞–π–ª**: `src/infrastructure/exchange/exchange.service.ts`
- –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `calculateVolume()`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã `executeMarketOrder()` –∏ `executeLimitOrder()`
- Market Orders: —Ä–∞—Å—á–µ—Ç –ø–æ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω–µ
- Limit Orders: —Ä–∞—Å—á–µ—Ç –ø–æ –ª–∏–º–∏—Ç–Ω–æ–π —Ü–µ–Ω–µ
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –±–∏—Ä–∂–µ–≤–æ–≥–æ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è

### 5. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `VOLUMEUSDT_FEATURE.md` - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (8.2 KB)
- `VOLUMEUSDT_QUICKSTART.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (2.5 KB)
- `CHANGELOG_VOLUMEUSDT.md` - –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π (9.0 KB)
- `VOLUMEUSDT_SUMMARY.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª

### 6. ‚úÖ –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
- `test-volumeusdt.sh` - –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (4.6 KB)
- 7 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª (chmod +x)

### 7. ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å–±–æ—Ä–∫–∞
- TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è: **‚úÖ –£—Å–ø–µ—à–Ω–æ**
- Linter –ø—Ä–æ–≤–µ—Ä–∫–∞: **‚úÖ –ë–µ–∑ –æ—à–∏–±–æ–∫**
- –†–∞–∑–º–µ—Ä dist/: **344 KB**

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–∏–º–µ—Ä

**–°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (–≤—Å—ë –µ—â—ë —Ä–∞–±–æ—Ç–∞–µ—Ç)**:
```json
{
  "exchange": "binance",
  "symbol": "BTC/USDT",
  "action": "buy",
  "volume": 0.001,
  "orderType": "market",
  "passphrase": "your_secret"
}
```

**–ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**:
```json
{
  "exchange": "binance",
  "symbol": "BTC/USDT",
  "action": "buy",
  "volumeUSDT": 100,
  "orderType": "market",
  "passphrase": "your_secret"
}
```

### –î–ª—è TradingView

```json
{
  "exchange": "binance",
  "symbol": "{{ticker}}",
  "action": "{{strategy.order.action}}",
  "volumeUSDT": 100,
  "orderType": "market",
  "passphrase": "your_secret"
}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä**:
```bash
npm run dev
# –∏–ª–∏
npm start
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã**:
```bash
./test-volumeusdt.sh
```

3. **–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
```bash
curl -X POST http://localhost:3000/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "exchange": "binance",
    "symbol": "BTC/USDT",
    "action": "buy",
    "volumeUSDT": 100,
    "orderType": "market",
    "passphrase": "test123"
  }'
```

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

#### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
```json
{
  "success": true,
  "orderId": "123456789",
  "exchange": "binance",
  "symbol": "BTC/USDT",
  "action": "buy",
  "volume": 0.002,
  "orderType": "market",
  "price": 50000,
  "status": "filled",
  "executedAt": "2024-12-22T12:00:00.000Z"
}
```

#### ‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```json
{
  "success": false,
  "error": "ValidationError: Either volume or volumeUSDT must be specified"
}
```

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
1. **volumeUSDT** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)
2. **volume** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–µ—Å–ª–∏ volumeUSDT –Ω–µ —É–∫–∞–∑–∞–Ω)

### –†–∞—Å—á–µ—Ç –æ–±—ä–µ–º–∞

**Market Order**:
```
currentPrice = fetchTicker().last
volume = volumeUSDT / currentPrice
roundedVolume = amountToPrecision(volume)
```

**Limit Order**:
```
currentPrice = fetchTicker().last
limitPrice = currentPrice √ó (1 ¬± 0.001)
volume = volumeUSDT / limitPrice
roundedVolume = amountToPrecision(volume)
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –±–∏—Ä–∂–∏
- ‚úÖ Binance
- ‚úÖ Bybit
- ‚úÖ OKX
- ‚úÖ Bitget

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä—ã–Ω–∫–∏
- ‚úÖ Spot (BTC/USDT)
- ‚úÖ Futures (BTC/USDT:USDT)
- ‚úÖ Perpetual (BTCUSDT.P)

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `VOLUMEUSDT_QUICKSTART.md` | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ |
| `VOLUMEUSDT_FEATURE.md` | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| `CHANGELOG_VOLUMEUSDT.md` | –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| `test-volumeusdt.sh` | –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç |

---

## üîß –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –®–∞–≥–∏ –¥–ª—è –¥–µ–ø–ª–æ—è

1. **–°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞**:
```bash
npm run build
```

2. **–ê—Ä—Ö–∏–≤–∞—Ü–∏—è**:
```bash
tar -czf tw-auto-executor-v1.1.0.tar.gz \
  dist/ \
  node_modules/ \
  package.json \
  package-lock.json \
  ecosystem.config.js \
  .env
```

3. **–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä**:
```bash
scp tw-auto-executor-v1.1.0.tar.gz user@server:/path/to/app/
```

4. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ**:
```bash
cd /path/to/app/
tar -xzf tw-auto-executor-v1.1.0.tar.gz
pm2 restart tw-auto-executor
```

5. **–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
# Health check
curl http://your-server.com:3000/health

# Test volumeUSDT
curl -X POST http://your-server.com:3000/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "exchange": "binance",
    "symbol": "BTC/USDT",
    "action": "buy",
    "volumeUSDT": 100,
    "orderType": "market",
    "passphrase": "your_production_secret"
  }'
```

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç**: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö
2. **–£–¥–æ–±—Å—Ç–≤–æ**: –ù–µ –Ω—É–∂–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç –≤—Ä—É—á–Ω—É—é
3. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ª—é–±—ã—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä
4. **–¢–æ—á–Ω–æ—Å—Ç—å**: –£—á–∏—Ç—ã–≤–∞–µ—Ç –±–∏—Ä–∂–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
5. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –°—Ç–∞—Ä—ã–µ –∞–ª–µ—Ä—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã **–æ–±–∞** –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (`volume` –∏ `volumeUSDT`), **–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è volumeUSDT**
- –≠—Ç–æ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

### –¢–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–∞
- Market Orders: –º–æ–∂–µ—Ç –±—ã—Ç—å slippage (–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è)
- Limit Orders: —Ä–∞—Å—á–µ—Ç –ø–æ —Ü–µ–Ω–µ –ª–∏–º–∏—Ç–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞ (¬±0.1%)

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º —Å–¥–µ–ª–∫–∏ –Ω–∞ –±–∏—Ä–∂–µ
- –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –∫–æ–º–∏—Å—Å–∏–∏ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ `volumeUSDT`

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤?**  
A: `volumeUSDT` –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ `volume`.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞?**  
A: –î–∞, –Ω–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ `volumeUSDT`.

**Q: –†–∞–±–æ—Ç–∞—é—Ç –ª–∏ —Å—Ç–∞—Ä—ã–µ –∞–ª–µ—Ä—Ç—ã?**  
A: –î–∞, –ø–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.

**Q: –ö–∞–∫–∞—è —Ü–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞?**  
A: Market Orders - —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞, Limit Orders - —Ä–∞—Å—á–µ—Ç–Ω–∞—è –ª–∏–º–∏—Ç–Ω–∞—è —Ü–µ–Ω–∞.

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ (JSON)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑–∞–Ω —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–±—ä–µ–º–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `test-volumeusdt.sh` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

## ‚ú® –ò—Ç–æ–≥–æ

### –ò–∑–º–µ–Ω–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 4
- `src/types/trade-signal.types.ts`
- `src/domain/validation.service.ts`
- `src/handler/webhook.handler.ts`
- `src/infrastructure/exchange/exchange.service.ts`

### –°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: 4
- `VOLUMEUSDT_FEATURE.md`
- `VOLUMEUSDT_QUICKSTART.md`
- `CHANGELOG_VOLUMEUSDT.md`
- `test-volumeusdt.sh`

### –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –°–±–æ—Ä–∫–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä –±–µ–∑ –∑–∞–º–µ—á–∞–Ω–∏–π
- ‚úÖ –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å (fp-ts) —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã

---

**üéä –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å volumeUSDT —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

**–ê–≤—Ç–æ—Ä**: AI Assistant  
**–î–∞—Ç–∞**: 22 –¥–µ–∫–∞–±—Ä—è 2024  
**–í–µ—Ä—Å–∏—è**: 1.1.0  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Production Ready

